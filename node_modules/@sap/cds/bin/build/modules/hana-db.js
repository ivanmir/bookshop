module.exports = {

    models: ['db', 'data-model.cds', 'data-model.csn'],
    conf: 'data',
    dest: '${folder}/src/gen', //NOSONAR

    build(options) {
        return this.load(options.models).then(m => {
            // .hdbcds files
            for (let [each, {
                    name
                }] of this.compile(m).to('hana', options)) {
                this.write(each).to(name, '.hdbcds')
            }
            // Add a .hdinamespace file to prevent HDI from adding gen/ folder to the namespace.
            // See issue #64.
            this.write({
                name: '',
                subfolder: 'ignore'
            }).to('.hdinamespace')
            // TODO:  copy .csv files
        })
    }
}