// simple json-pointer parser functionality

function parse(p) {
  if(p.length>0 && p[0]!=='/')
    throw Error("JsonPoint should have a leading slash")
  let sp = p.split("/")
  return sp.slice(1).map(unescape);
}

function unescape(s) {
  if(s==="")
    throw Error("JsonPoint has an empty token")
  let r = s.
    replace(/~1/g, '/').  // replace ~1 with /
    replace(/~0/g, '~');  // replace ~0 with ~
  return r;
}

module.exports = {parse}