const to = (service) => {
  const cds = require('../../cds')
  const OData = require('./OData')

  const odata = new OData(cds.compile.to.edm(service.definition, {service: service._options.service}), service._options)
  odata.addCDSServiceToChannel(service)

  return odata.getService()
}

module.exports = to
